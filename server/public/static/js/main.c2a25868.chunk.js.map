{"version":3,"sources":["Components/LoadingSpinner.js","App.js","serviceWorker.js","index.js"],"names":["LoadingSpinner","className","productData","product_id","product_name","product_type","product_sku","product_price","short_description","long_description","info_description","tech_specs","defaultImage","images","thumbnails","datasheet_benefits","datasheet_features","device_compatibility","package_content","warranty","certifications","rating","upc_code","unit_height","unit_width","unit_depth","unit_weight","height","width","depth","weight","contact_name","contact_dep","contact_phone","contact_email","footer_company","footer_address","footer_email","footer_phone","footer_fax","footer_site","console","log","App","props","createAndDownloadPdf","axios","post","state","then","get","responseType","res","pdfBlob","Blob","data","type","saveAs","downloadPdf","setState","loading","fetchData","searchParams","URL","window","location","splitProductDescription","desc","html","array","split","DOMParser","parseFromString","body","textContent","regexValid","RegExp","e","replace","stripLinks","handleData","product","site","entityId","name","customFields","edges","forEach","field","node","value","fields","getUpcCode","getUnitDimensions","findCertifications","findRating","sku","prices","price","description","image","index","img320px","generateThumbnails","benefits","item","findBenefits","features","productLine","axtionSeries","featureList","icons","domain","iconsrc","spaceToDash","url","toLowerCase","push","findFeatureIcons","findFeatures","findPackageContent","findDeviceCompatibility","params","store_url","id","token","Object","keys","key","document","getElementById","innerHTML","footer","length","unit","renderProduct","renderPage","testData","componentDidMount","this","src","alt","onClick","Component","Boolean","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.c2a25868.chunk.js","sourcesContent":["import React from 'react';\nimport './loadingspinner.css';\n\nconst LoadingSpinner = () => {\n    return (\n        <div className=\"sk-circle\">\n            <div className=\"sk-circle1 sk-child\"></div>\n            <div className=\"sk-circle2 sk-child\"></div>\n            <div className=\"sk-circle3 sk-child\"></div>\n            <div className=\"sk-circle4 sk-child\"></div>\n            <div className=\"sk-circle5 sk-child\"></div>\n            <div className=\"sk-circle6 sk-child\"></div>\n            <div className=\"sk-circle7 sk-child\"></div>\n            <div className=\"sk-circle8 sk-child\"></div>\n            <div className=\"sk-circle9 sk-child\"></div>\n            <div className=\"sk-circle10 sk-child\"></div>\n            <div className=\"sk-circle11 sk-child\"></div>\n            <div className=\"sk-circle12 sk-child\"></div>\n        </div>\n    )\n}\n\nexport default LoadingSpinner","import React, { Component,  } from 'react';\nimport axios from 'axios';\nimport { saveAs } from 'file-saver';\nimport LoadingSpinner from './Components/LoadingSpinner';\nimport './App.css';\nimport './Components/Datasheet.css';\nimport testData from './testdata.json';\n\nlet productData = {\n  product_id: 0,\n  product_name: '',\n  product_type: '',\n  product_sku: '',\n  product_price: '',\n  short_description: '',\n  long_description: '',\n  info_description: '',\n  tech_specs: '',\n  defaultImage: [],\n  images: [],\n  thumbnails: '',\n  datasheet_benefits: '',\n  datasheet_features: '',\n  device_compatibility: '',\n  package_content: '',\n  warranty: '',\n  certifications: '',\n  rating: '',\n  upc_code: '',\n  unit_height: '',\n  unit_width: '',\n  unit_depth: '',\n  unit_weight: '',\n  height: {},\n  width: {},\n  depth: {},\n  weight: {},\n  contact_name: 'The Joy Factory',\n  contact_dep: 'Sales Team',\n  contact_phone: '949.382.1552',\n  contact_email: 'sales@thejoyfactory.com',\n  footer_company: 'The Joy Factory Inc.',\n  footer_address: '16811 Hale Ave Bldg D, Irvine, CA 92606',\n  footer_email: 'sales@thejoyfactory.com',\n  footer_phone: '949.216.8869',\n  footer_fax: '949.216.8869',\n  footer_site: 'www.thejoyfactory.com'\n}\n\nconsole.log(productData);\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: 0,\n      loading: false\n    }\n  }\n\n  // Use Componenet state data to handle PDF Download\n  createAndDownloadPdf = () => {\n    axios.post('/create-pdf', this.state)\n    .then(() => axios.get('fetch-pdf', { responseType: 'blob' }))\n    .then((res) => {\n      const pdfBlob = new Blob([res.data], { type: 'application/pdf' });\n      saveAs(pdfBlob, 'datasheet-tjf.pdf');\n    });\n  }\n\n  // Currently being used to handle PDF Download\n  downloadPdf = () => {\n    this.setState({ loading: true });\n  \n    axios.post('/download-pdf', productData)\n    .then(() => axios.get('fetch-pdf', { responseType: 'blob' }))\n    .then((res) => {\n      const pdfBlob = new Blob([res.data], { type: 'application/pdf' });\n      saveAs(pdfBlob, `datasheet-${productData.product_sku}.pdf`);\n      this.setState({ loading: false });\n    })\n  }\n\n  // downloadPdf = () => {\n  //   fetch(\"/download-pdf\", {\n  //     method: \"POST\",\n  //     body: JSON.stringify(productData),\n  //   }).then((res) => {\n  //     res.arrayBuffer().then((res) => {\n  //       console.log(res);\n  //       const pdfBlob = new Blob([res], { type: \"application/pdf\" });\n  //       saveAs(pdfBlob, \"datasheet.pdf\");\n  //     });\n  //   });\n  // }\n\n  fetchData = () => {\n    console.log(\"FetchData started...\");\n    const pageUrl = new URL(window.location);\n    const searchParams = pageUrl.searchParams;\n    console.log(`Search Params: ${searchParams}`);\n\n    /*\n        Utility functions for rendering\n    */\n\n    // Based on the browser locale, provide a localized price\n    function formatLocalizedPrice (price) {\n        return new Intl.NumberFormat(navigator.language, {style: 'currency', currency: price.currencyCode}).format(price.value);\n    }\n\n    // Create a srcset string for responsive images\n    function renderSrcset(image) {\n        return `${image.img320px} 320w, ${image.img640px} 640w, ${image.img960px} 960w, ${image.img1280px} 1280w`\n    }\n\n    // Function to strip HTML from product descriptions, leaving just the text\n    function stripHtml(html) {\n        var doc = new DOMParser().parseFromString(html, 'text/html');\n        return doc.body.textContent || \"\";\n    }\n\n    // Function to strip link tags from product descriptions\n    function stripLinks(desc) {\n      let cleanDesc = '';\n      let regexValid = false;\n      try {\n        // Check if there are links in the Tech Specs Description\n        new RegExp(/<a.*?>[^<]*<\\/a>/);\n        regexValid = true;\n      } catch(e) {\n        regexValid = false;\n      }\n      // If a link is found, also remove the double BR tags\n      if(regexValid) {\n        let removedFirstBR = desc.replace(/<br><br>/, \"\");\n        cleanDesc = removedFirstBR.replace(/<a.*?>[^<]*<\\/a>/g, \"\");\n        return cleanDesc;\n      } else {\n        return desc;\n      }\n    }\n\n    function findProductType(fields) {\n      fields.forEach((field) => {\n        if(field.node.name === \"product_type\") {\n          productData.product_type = field.node.value;\n        }\n      })\n    }\n\n    function findDeviceCompatibility(fields) {\n      fields.forEach((field) => {\n        if(field.node.name === \"device_compatibility\") {\n          let device_compatibility = field.node.value;\n          productData.device_compatibility =  device_compatibility.replace(',', ' | ');\n        }\n      })\n    }\n\n    function findCertifications(fields) {\n      fields.forEach((field) => {\n        if(field.node.name === \"certifications\") {\n          let certifications = field.node.value;\n          productData.certifications = certifications.replace(',', ' | ');\n        }\n      })\n    }\n\n    function findRating(fields) {\n      fields.forEach((field) => {\n        if(field.node.name === \"rating\") {\n          let rating = field.node.value;\n          productData.rating = rating.replace(',', ' | ');\n        }\n      })\n    }\n\n    function findPackageContent(fields) {\n      fields.forEach((field) => {\n        if(field.node.name === \"package_content\") {\n          productData.package_content = field.node.value;\n        }\n      })\n    }\n\n    function splitProductDescription(desc) {\n      var array = desc.split(\"&lt;!-- split --&gt;\");\n      productData.short_description = stripHtml(array[0]);\n      productData.long_description = array[1];\n      productData.info_description = array[2];\n      productData.tech_specs = stripLinks(array[3]);\n    }\n\n    function generateThumbnails(images) {\n      let thumbnails = '';\n      images.forEach((image, index) => {\n        if(index !== 0 && index < 4)\n        thumbnails += `<img class=\"thumbnail\" src=\"${image.node.img320px}\">`\n      });\n      productData.thumbnails = thumbnails;\n    }\n\n    function findBenefits(fields) {\n      var benefits;\n      fields.forEach((field) => {\n        if(field.node.name === \"datasheet_benefits\") {\n          benefits = field.node.value;\n        }\n      })\n      var array = benefits.split(\",\");\n      array.forEach((item, index) => {\n        if(index % 3 === 0) {\n          productData.datasheet_benefits += `<tr>`;\n        }\n        productData.datasheet_benefits += `<td><li>${item}</li></td>`;\n        if(index === 2 || index === 5) {\n          productData.datasheet_benefits += `</tr>`;\n        }\n      })\n    }\n\n    function findFeatures(fields) {\n      let features;\n      let productLine;\n      let axtionSeries;\n      fields.forEach((field) => {\n        if(field.node.name === \"datasheet_features\") {\n          features = field.node.value;\n        }\n      })\n      fields.forEach((field) => {\n        if(field.node.name === \"product_line\") {\n          productLine = field.node.value;\n        }\n      })\n      fields.forEach((field) => {\n        if(field.node.name === \"axtion_series\") {\n          axtionSeries = field.node.value;\n        }\n      })\n      let featureList = features.split(\",\");\n      let icons = findFeatureIcons(featureList, productLine, axtionSeries);\n      featureList.forEach((item, index) => {\n        if(index % 3 === 0) {\n          productData.datasheet_features += `<tr>`;\n        }\n        productData.datasheet_features += `<td><li class=\"feature-item\"><img class=\"feature-icon\" src=\"${icons[index]}\">${item}</li></td>`;\n        if(index === 2 || index === 5) {\n          productData.datasheet_features += `</tr>`;\n        }\n      })\n    }\n\n    function findFeatureIcons(features, productLine, axtionSeries) {\n      let domain = 'https://thejoyfactory.com/content/datasheet/icons/';\n      let iconsrc = [];\n\n      features.forEach((item, index) => {\n        let spaceToDash = item.replace(/ /g, \"-\");\n        let icon = '';\n\n        if(axtionSeries != null) {\n          icon = `${domain}${productLine}-${axtionSeries}-${spaceToDash}.png`\n        } else {\n          icon = `${domain}${productLine}-${spaceToDash}.png`\n        }\n\n        let url = icon.toLowerCase();\n        iconsrc.push(url);\n      })\n      return iconsrc;\n    }\n\n    function getUpcCode(fields) {\n      fields.forEach((field) => {\n        if(field.node.name === \"upc_code\") {\n          productData.upc_code = field.node.value;\n        }\n      })\n    }\n\n    function getUnitDimensions(fields) {\n      fields.forEach((field) => {\n        // Get unit height\n        if(field.node.name === \"unit_height\") {\n          productData.unit_height = field.node.value;\n        }\n        // Get unit width\n        else if(field.node.name === \"unit_width\") {\n          productData.unit_width = field.node.value;\n        }\n        // Get unit depth\n        else if(field.node.name === \"unit_depth\") {\n          productData.unit_depth = field.node.value;\n        }\n        // Get unit weight\n        else if(field.node.name === \"unit_weight\") {\n          productData.unit_weight = field.node.value;\n        }\n      })\n    }\n\n    // Assign data values into state\n    function handleData(data) {\n      const product = data.site.product;\n      console.log('Assigning new values to state...');\n      productData.product_id = product.entityId;\n      productData.product_name = product.name;\n      findProductType(product.customFields.edges);\n      getUpcCode(product.customFields.edges);\n      getUnitDimensions(product.customFields.edges);\n      findCertifications(product.customFields.edges);\n      findRating(product.customFields.edges);\n      productData.product_sku = product.sku;\n      productData.product_price = product.prices.price.value;\n      splitProductDescription(product.description);\n      productData.defaultImage = product.defaultImage;\n      productData.images = product.images.edges;\n      generateThumbnails(product.images.edges);\n      findBenefits(product.customFields.edges);\n      findFeatures(product.customFields.edges);\n      productData.warranty = product.warranty;\n      productData.depth = product.depth;\n      productData.height = product.height;\n      productData.weight = product.weight;\n      productData.width = product.width;\n      findPackageContent(product.customFields.edges);\n      findDeviceCompatibility(product.customFields.edges);\n    }\n\n    /*\n        Page rendering logic\n    */\n    function renderPage(data) {\n        // Render the HTML for the product\n        console.log(data);\n        \n        const product = data.site.product;\n        console.log(product);\n\n        handleData(data);\n\n        document.getElementById('product').innerHTML = renderProduct(productData);\n    }\n\n    function renderProduct(product) {\n        // Footer\n        const footer = `\n          <table class=\"footer text-left\">\n            <tr>\n                <td style=\"width:73%;\">\n                  <table>\n                  <tr>\n                    <td class=\"footer-company\" style=\"width:73%;\">The Joy Factory Inc.</td>\n                  </tr>\n                  <tr>\n                    <td class=\"footer-second-desc\">${product.footer_address} <span style=\"color: #d0103a;\">|</span> ${product.footer_email} <span style=\"color: #d0103a;\">|</span> T : ${product.footer_phone} <span style=\"color: #d0103a;\">|</span> F : ${product.footer_fax} <span style=\"color: #d0103a;\">|</span> ${product.footer_site}</td>\n                  </tr>\n                  </table>     \n                </td>\n                <td style=\"width:16.5%;\">\n                  <table class=\"footer-icons\" style=\"width:100%;\">\n                    <tr>\n                      <td class=\"footer-image\"><img src=\"https://thejoyfactory.com/content/datasheet/protect.jpg\" alt=\"The Joy Factory Protect Icon\"></td>\n                      <td class=\"footer-image\"><img src=\"https://thejoyfactory.com/content/datasheet/secure.jpg\" alt=\"The Joy Factory Secure Icon\"></td>\n                      <td class=\"footer-image\"><img src=\"https://thejoyfactory.com/content/datasheet/position.jpg\" alt=\"The Joy Factory Position Icon\"></td>\n                    </tr>\n                    <tr>\n                      <td class=\"footer-image-content\">Protect</td>\n                      <td class=\"footer-image-content\">Secure</td>\n                      <td class=\"footer-image-content\">Position</td>\n                    </tr>\n                  </table>\n                </td>\n                <td align=\"center\" style=\"width:10.5%;\">\n                  <img src=\"https://thejoyfactory.com/content/datasheet/logo.png\" alt=\"The Joy Factory logo.\" style=\"width:100px;\">\n                </td>\n            </tr>\n          </table>\n          `\n\n        // Contact Section - currently not used on customer preview\n        const contact = `\n          <div class=\"contact-table\" style=\"margin: 10px 0 300px 0; padding: 10px;\">\n            <table class=\"contact\" style=\"background: white; width: 100%;\">\n              <tr>\n                <td class=\"text-center\" style=\"padding: 5px 30px; width: 25%;\">\n                  <img src=\"https://thejoyfactory.com/content/datasheet/logo-lg.png\" alt=\"The Joy Factory logo.\" style=\"width:100px;\">\n                </td>\n                <td class=\"text-left\" style=\"padding: 5px 30px; width: 25%;\">\n                  <p style=\"font-size: 1.25rem; font-weight: bold;\">${product.contact_name}</p>\n                  <p style=\"font-size: 0.9rem; font-weight: bold;\">${product.contact_dep}</p>\n                </td>\n                <td class=\"text-left\" style=\"border-left:solid 2px red; padding: 5px 30px; width: 50%;\">\n                  <p>Direct Phone Number | ${product.contact_phone}</p>\n                  <p>Email Address | ${product.contact_email}</p>\n                </td>\n              </tr>\n            </table>\n          </div>\n        `\n\n        // Render the product into a preview\n        return `\n          <!-- Start: Page One -->\n          <div class=\"page\" id=\"page-one\">\n            <table class=\"text-left\">\n              <tr>\n                <td class=\"product-header\">\n                  <h1 class=\"product-name\">${product.product_name}</h1>\n                  <p class=\"product-short-desc\">${product.short_description}</p>\n                  <hr class=\"hr-short hr-left\">\n                  <div class=\"product-sku-price\">\n                    <p class=\"product-sku\">SKU: ${product.product_sku}</p>\n                    <p class=\"product-price\">MSRP: $${product.product_price}</p>\n                  </div>\n                </td>\n              </tr>\n            </table>\n            <table class=\"product-desc-container\">\n              <tr>\n                <td class=\"product-description\">\n                  ${product.long_description}\n                  ${product.info_description}\n                </td>\n                <td class=\"product-images\">\n                  ${product.defaultImage ? `<img class=\"default-image\" src=\"${product.defaultImage.img320px}\" alt=\"The Joy Factory product image\">` : ''}\n                  <p>\n                    ${product.thumbnails}\n                  </p>\n                </td>\n              </tr>\n            </table>\n            <div class=\"benefits\">\n               <span class=\"benefits-header\">Benefits</span>\n               <br>\n               <table>\n                  ${product.datasheet_benefits}\n               </table>\n            </div>\n            <div class=\"features\">\n               <span class=\"features-header\">Features</span>\n               <br>\n               <table>\n                  ${product.datasheet_features}\n               </table>\n            </div>\n            ${footer}\n          </div>\n          <!-- End: Page One -->\n\n          <!-- Start: Page Two -->\n          <div class=\"page\" id=\"page-two\">\n            <div class=\"tech-specs-header\">\n              <p>\n                Technical Specifications\n                <br>\n                <span class=\"underline\"></span>\n              </p>\n            </div>\n            <table class=\"tech-specs-container\">\n              <tr>\n                <td class=\"tech-specs-image-container\" style=\"padding: 0 25px;\">\n                  ${product.images[product.images.length-1] ? `<img class=\"tech-spec-image\" src=\"${product.images[product.images.length-1].node.img320px}\" alt=\"The Joy Factory product image\">` : ''}\n                  <p class=\"disclaimer\" style=\"font-size: 7px;\">The information on this data sheet is subject to change at any time at the discretion of The Joy Factory</p>\n                </td>\n                <td class=\"tech-specs\">\n                  ${product.tech_specs}\n                </td>\n              </tr>\n            </table>\n            <div class=\"product-specifications\">\n              <table class=\"product-specs-table\">\n                <tr>\n                  <td class=\"product-info-container\">\n                    <div class=\"product-name text-left\">\n                      ${product.product_name}\n                    </div>\n                    <table class=\"product-info-inner-table\">\n                      <tr>\n                        <div class=\"product-info-group\">\n                          <p>SKU: ${product.product_sku}</p>\n                          <p>Product type: ${product.product_type}</p>\n                          <p>MSRP: $${product.product_price}</p>\n                        </div>\n                      </tr>\n                    </table>\n                  </td>\n                  <td class=\"product-specs-container\">\n                    <table class=\"product-specs-inner-table\">\n                      <th class=\"product-specs-title\">Product Specifications</th>\n                      <tr>\n                        <td>Compatible with: ${product.device_compatibility}</td>\n                      </tr>\n                      <tr>\n                        <td>Product height: ${product.unit_height} in</td>\n                      </tr>\n                      <tr>\n                        <td>Product width: ${product.unit_width} in</td>\n                      </tr>\n                      <tr>\n                        <td>Product thickness: ${product.unit_depth} in</td>\n                      </tr>\n                      <tr>\n                        <td>Product weight: ${product.unit_weight} lb</td>\n                      </tr>\n                      <tr>\n                        <td>Package height: ${product.height.value} ${product.height.unit}</td>\n                      </tr>\n                      <tr>\n                        <td>Package width: ${product.width.value} ${product.width.unit}</td>\n                      </tr>\n                      <tr>\n                        <td>Package depth: ${product.depth.value} ${product.depth.unit}</td>\n                      </tr>\n                      <tr>\n                        <td>Package weight: ${product.weight.value} ${product.weight.unit}</td>\n                      </tr>\n                      <tr>\n                        <td>UPC: ${product.upc_code}</td>\n                      </tr>\n                      <tr>\n                        <td>Warranty: ${product.warranty}</td>\n                      </tr>\n                      <tr>\n                        <td>Certifications: ${product.certifications}</td>\n                      </tr>\n                      <tr>\n                        <td>Rating: ${product.rating}</td>\n                      </tr>\n                      <tr>\n                        <td>Package content: ${product.package_content}</td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n              </table>\n            </div>\n            ${footer}\n          </div>\n          <!-- End: Page Two -->\n        `\n    }\n\n    function renderPrice(prices) {\n        // Render the price component from the supplied prices\n        return `<span></span>`\n    }\n\n    /*\n        API fetching\n    */\n    function getProductAndSiteInfo(params) {\n        const storeUrl = new URL(params.store_url);\n\n        // Use the store's canonical URL which should always resolve\n        const graphQLUrl = `${storeUrl.origin}/graphql`;\n\n        // Set up GraphQL query\n        // If specific product IDs were supplied, fetch them, else just get the first few products\n        const graphQLQuery = `\n        query SingleProduct {\n          site {\n            product(entityId: ${params.id}) {\n              entityId\n              brand {\n                name\n              }\n              name\n              sku\n              path\n              description\n              height {\n                value\n                unit\n              }\n              width {\n                value\n                unit\n              }\n              weight {\n                value\n                unit\n              }\n              depth {\n                value\n                unit\n              }\n              warranty\n              customFields {\n                edges {\n                  node {\n                    name\n                    value\n                  }\n                }\n              }\n              defaultImage {\n                img320px: url(width: 320)\n                img640px: url(width: 640)\n                img960px: url(width: 960)\n              }\n              images {\n                edges {\n                  node {\n                    img320px:url(width:320)\n                  }\n                }\n              }\n              prices {\n                price {\n                  ...PriceFields\n                }\n              }\n            }\n          }\n        }\n          \n        fragment PriceFields on Money {\n          value\n          currencyCode\n        }`\n\n        // Fetch data from the GraphQL Storefront API\n        return fetch(graphQLUrl, {\n          method: 'POST',\n          credentials: 'include',\n          mode: 'cors',\n          headers: { 'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${params.token}`},\n          body: JSON.stringify({ query: graphQLQuery}),\n        })\n        .then(res => res.json())\n        .then(res => res.data);\n    }\n\n    // Set up default params (token expires 1/15/2038)\n    let params = {\n        store_url: \"https://thejoyfactory.com\",\n        id: null,\n        token: \"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJlYXQiOjIxNDcxMjY0MDAsInN1Yl90eXBlIjoyLCJ0b2tlbl90eXBlIjoxLCJjb3JzIjpbImh0dHBzOi8vZGF0YXNoZWV0LWRlbW8uaGVyb2t1YXBwLmNvbSJdLCJjaWQiOjEsImlhdCI6MTU5NTkyNDE5MCwic3ViIjoianYwbXNnZXcyY3U2cHF6NGhtd200MmhtamtseXh0NiIsInNpZCI6MTAwMDY3NjI0MCwiaXNzIjoiQkMifQ.GwsvV50ENH8X5J1UQ61w3Nq_8d-YrgVxecipSVuEJvDYpT5KOXf71mwjvV4m5U0B7Ac-pU0oF0tjnaN1LdJ04A\"\n    };\n\n    // Fill in supplied URL params\n    Object.keys(params).forEach(function (key) {\n        if (searchParams.get(key)) {\n            params[key] = searchParams.get(key);\n        }\n    });\n\n    // Use testdata.json file as testData\n    renderPage(testData);\n\n    // Check for required parameters, throw an error if they're not found\n    // if (!(params.store_url && params.token)) {\n    //     throw new Error('At least one of the required URL parameters (Store URL, Token) was not supplied or was invalid');\n    // } else {\n    //     // It seems like the required parameters were supplied, try to load the product data from the Storefront API\n    //     getProductAndSiteInfo(params).then(data => {\n    //         // With our data loaded, render the product listing\n    //         renderPage(data);\n          \n    //     }).catch(e => {\n    //       // Some error was encountered\n    //       console.log(`Error: failed to fetch product data.`);\n    //       throw(e);\n    //     });\n    // }\n  }\n\n  componentDidMount = () => {\n    this.fetchData();\n  }\n\n  render() {\n    const loading = this.state.loading;\n\n    return (\n      <div className=\"App container my-5\">\n        <div className=\"pdf-test\">\n          <img className=\"download-icon\" src=\"https://thejoyfactory.com/content/datasheet/icons/data-sheet-icon-01.png\" alt=\"icon\" />\n          <button className=\"btn btn-primary\" onClick={this.downloadPdf}>\n            Download PDF\n          </button>\n          {loading ? <LoadingSpinner /> : ''}\n        </div>\n        <div className=\"py-5\" id=\"intro\"><h1>Datasheet Preview</h1></div>\n        <div id=\"product\"></div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}